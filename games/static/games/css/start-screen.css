/* ============================================
   Xiangqi Start Screen – Classical Wood Style
   ============================================ */

/* ---------- Design Tokens ---------- */
:root {
    /* Wood background – dark mahogany range */
    --bg-dark: #2a120b;
    --bg-mid: #4b2416;

    /* Ornate frame wood – lighter than background */
    --frame-light: #a06b3d;
    --frame-mid: #8d5a30;
    --frame-dark: #6a3f1f;

    /* Parchment */
    --parchment: #f3e7cf;
    --parchment-shadow: #d8c2a0;

    /* Text */
    --text-title: #3a2014;
    --text-body: #4b2d1e;
    --text-muted: #6d5d52;

    /* Button – red lacquer */
    --red-top: #b11a1f;
    --red-bottom: #7a0f12;

    /* Gold / brass accents */
    --gold: #caa76a;
    --gold-bright: #ffd700;

    /* Header links */
    --header-cream: #f0ead6;

    /* Misc */
    --border-dark: #1e0d07;
}

/* ---------- Reset ---------- */
*,
*::before,
*::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Noto Serif', 'Georgia', serif;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
}

/* =========================================
   LAYER 1 – Full-screen dark wood canvas
   ========================================= */
.wood-background {
    position: relative;
    width: 100%;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;

    /* Base colour */
    background-color: var(--bg-dark);

    /* Subtle radial warmth + wood grain simulation */
    background-image:
        /* Layer 3 – vignette (dark edges) */
        radial-gradient(ellipse 80% 80% at 50% 50%,
            transparent 40%,
            rgba(0, 0, 0, 0.65) 100%),
        /* Layer 2 – warm centre glow */
        radial-gradient(ellipse at 50% 40%,
            var(--bg-mid) 0%,
            var(--bg-dark) 70%),
        /* Layer 1 – very faint horizontal grain lines */
        repeating-linear-gradient(0deg,
            transparent,
            transparent 3px,
            rgba(255, 255, 255, 0.012) 3px,
            rgba(255, 255, 255, 0.012) 4px);
}

/* Inner shadow "thick wood frame" around viewport and deeper vignette */
.wood-background::after {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    box-shadow:
        inset 0 0 100px 40px rgba(0, 0, 0, 0.75),
        inset 0 0 250px 80px rgba(0, 0, 0, 0.4);
    z-index: 1;
}

/* ---------- Subtle corner ornaments ---------- */
.border-ornament {
    position: absolute;
    width: 150px;
    height: 150px;
    opacity: 0.25;
    pointer-events: none;
    z-index: 2;
}

.border-ornament.top-left {
    top: -20px;
    left: -20px;
    background:
        linear-gradient(135deg, rgba(160, 107, 61, 0.45) 0%, transparent 50%),
        repeating-linear-gradient(45deg, transparent, transparent 10px,
            rgba(160, 107, 61, 0.12) 10px, rgba(160, 107, 61, 0.12) 12px);
    border-radius: 0 0 100% 0;
}

.border-ornament.top-right {
    top: -20px;
    right: -20px;
    background:
        linear-gradient(225deg, rgba(160, 107, 61, 0.45) 0%, transparent 50%),
        repeating-linear-gradient(-45deg, transparent, transparent 10px,
            rgba(160, 107, 61, 0.12) 10px, rgba(160, 107, 61, 0.12) 12px);
    border-radius: 0 0 0 100%;
}

.border-ornament.bottom-left {
    bottom: -20px;
    left: -20px;
    background:
        linear-gradient(45deg, rgba(160, 107, 61, 0.45) 0%, transparent 50%),
        repeating-linear-gradient(135deg, transparent, transparent 10px,
            rgba(160, 107, 61, 0.12) 10px, rgba(160, 107, 61, 0.12) 12px);
    border-radius: 0 100% 0 0;
}

.border-ornament.bottom-right {
    bottom: -20px;
    right: -20px;
    background:
        linear-gradient(315deg, rgba(160, 107, 61, 0.45) 0%, transparent 50%),
        repeating-linear-gradient(225deg, transparent, transparent 10px,
            rgba(160, 107, 61, 0.12) 10px, rgba(160, 107, 61, 0.12) 12px);
    border-radius: 100% 0 0 0;
}

/* =========================================
   HEADER – logo + nav links
   ========================================= */
.game-header {
    position: absolute;
    top: 28px;
    left: 0;
    right: 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 44px;
    z-index: 100;
}

.logo {
    filter: drop-shadow(0 2px 6px rgba(0, 0, 0, 0.6));
}

.nav-links {
    display: flex;
    gap: 28px;
}

.nav-links a {
    color: var(--header-cream);
    text-decoration: none;
    font-size: 15px;
    font-weight: 600;
    font-family: 'Noto Serif', serif;
    letter-spacing: 1px;
    text-transform: uppercase;
    opacity: 0.85;
    transition: all 0.3s ease;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
}

.nav-links a:hover,
.nav-links a.active {
    opacity: 1;
    color: var(--gold-bright);
    transform: translateY(-1px);
}

/* =========================================
   CENTER PANEL – ornate card
   ========================================= */

/* Warm glow behind the card */
.plaque-container {
    position: relative;
    width: 480px;
    z-index: 10;
}

.plaque-container::before {
    content: '';
    position: absolute;
    top: -80px;
    left: 50%;
    transform: translateX(-50%);
    width: 500px;
    height: 500px;
    background: radial-gradient(ellipse at center,
            rgba(202, 167, 106, 0.12) 0%,
            transparent 65%);
    pointer-events: none;
    z-index: -1;
}

/* --- Outer ornate frame (wood) --- */
.plaque-frame {
    position: relative;
    border-radius: 18px;
    border: 3px solid var(--border-dark);
    padding: 24px;

    /* Wood gradient with bevel highlights */
    background:
        linear-gradient(160deg,
            var(--frame-light) 0%,
            var(--frame-mid) 30%,
            var(--frame-dark) 65%,
            var(--frame-mid) 85%,
            var(--frame-light) 100%);

    /* 3D floating effect – deep shadow + bevel */
    box-shadow:
        /* drop shadow */
        0 16px 40px rgba(0, 0, 0, 0.55),
        0 6px 12px rgba(0, 0, 0, 0.35),
        /* bevel – highlight top-left */
        inset 2px 2px 4px rgba(255, 255, 255, 0.18),
        /* bevel – shadow bottom-right */
        inset -2px -2px 4px rgba(0, 0, 0, 0.35);
}

/* --- Carved frame edge decorations --- */
.frame-decoration {
    position: absolute;
    opacity: 0.5;
    pointer-events: none;
}

.frame-decoration.top {
    top: 7px;
    left: 55px;
    right: 55px;
    height: 10px;
    background-image: repeating-linear-gradient(90deg,
            transparent 0px, transparent 6px,
            rgba(202, 167, 106, 0.35) 6px, rgba(202, 167, 106, 0.35) 8px,
            transparent 8px, transparent 14px,
            rgba(106, 63, 31, 0.4) 14px, rgba(106, 63, 31, 0.4) 16px,
            transparent 16px, transparent 22px);
}

.frame-decoration.bottom {
    bottom: 7px;
    left: 55px;
    right: 55px;
    height: 10px;
    background-image: repeating-linear-gradient(90deg,
            transparent 0px, transparent 6px,
            rgba(202, 167, 106, 0.35) 6px, rgba(202, 167, 106, 0.35) 8px,
            transparent 8px, transparent 14px,
            rgba(106, 63, 31, 0.4) 14px, rgba(106, 63, 31, 0.4) 16px,
            transparent 16px, transparent 22px);
}

.frame-decoration.left {
    left: 7px;
    top: 55px;
    bottom: 55px;
    width: 10px;
    background-image: repeating-linear-gradient(0deg,
            transparent 0px, transparent 6px,
            rgba(202, 167, 106, 0.35) 6px, rgba(202, 167, 106, 0.35) 8px,
            transparent 8px, transparent 14px,
            rgba(106, 63, 31, 0.4) 14px, rgba(106, 63, 31, 0.4) 16px,
            transparent 16px, transparent 22px);
}

.frame-decoration.right {
    right: 7px;
    top: 55px;
    bottom: 55px;
    width: 10px;
    background-image: repeating-linear-gradient(0deg,
            transparent 0px, transparent 6px,
            rgba(202, 167, 106, 0.35) 6px, rgba(202, 167, 106, 0.35) 8px,
            transparent 8px, transparent 14px,
            rgba(106, 63, 31, 0.4) 14px, rgba(106, 63, 31, 0.4) 16px,
            transparent 16px, transparent 22px);
}

/* =========================================
   INNER PARCHMENT PANEL
   ========================================= */
.plaque-content {
    position: relative;
    border-radius: 12px;
    padding: 40px 32px;

    /* Cream parchment + subtle diagonal highlight */
    background:
        linear-gradient(135deg,
            rgba(255, 255, 255, 0.22) 0%,
            transparent 40%,
            transparent 60%,
            rgba(0, 0, 0, 0.03) 100%);
    background-color: var(--parchment);

    /* Recessed into frame */
    box-shadow:
        inset 0 3px 8px rgba(106, 63, 31, 0.2),
        inset 0 -2px 5px rgba(255, 255, 255, 0.15),
        0 2px 6px rgba(0, 0, 0, 0.15);
}

/* --- Chinese key-pattern corner decorations --- */
.corner-decoration {
    position: absolute;
    width: 36px;
    height: 36px;
    border-style: solid;
    border-color: var(--gold);
    opacity: 0.35;
    pointer-events: none;
}

.corner-decoration.tl {
    top: 12px;
    left: 12px;
    border-width: 2px 0 0 2px;
    border-radius: 2px 0 0 0;
}

.corner-decoration.tr {
    top: 12px;
    right: 12px;
    border-width: 2px 2px 0 0;
    border-radius: 0 2px 0 0;
}

.corner-decoration.bl {
    bottom: 12px;
    left: 12px;
    border-width: 0 0 2px 2px;
    border-radius: 0 0 0 2px;
}

.corner-decoration.br {
    bottom: 12px;
    right: 12px;
    border-width: 0 2px 2px 0;
    border-radius: 0 0 2px 0;
}

/* =========================================
   TYPOGRAPHY
   ========================================= */
.game-title {
    font-family: 'Ma Shan Zheng', 'Noto Serif SC', cursive, serif;
    font-size: 48px;
    font-weight: 400;
    color: var(--text-title);
    text-align: center;
    margin: 0 0 8px 0;
    letter-spacing: 6px;
    /* Carved-in feel: light highlight above, shadow below */
    text-shadow:
        1px 1px 0px rgba(255, 255, 255, 0.35),
        0 2px 4px rgba(58, 32, 20, 0.15);
}

.subtitle {
    font-size: 15px;
    font-family: 'Noto Serif', 'Georgia', serif;
    color: var(--text-muted);
    text-align: center;
    margin: 0 0 36px 0;
    font-style: italic;
}

/* =========================================
   FORM
   ========================================= */
form {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 14px;
}

.form-group label {
    font-size: 15px;
    font-family: 'Noto Serif', 'Georgia', serif;
    font-weight: 700;
    color: var(--text-body);
    letter-spacing: 1px;
}

/* --- Wooden pill dropdown --- */
.select-wrapper {
    position: relative;
    width: 100%;
}

.select-wrapper select {
    width: 100%;
    padding: 14px 42px 14px 16px;
    font-family: 'Noto Serif', serif;
    font-size: 15px;
    font-weight: 600;
    color: var(--text-body);
    appearance: none;
    cursor: pointer;
    outline: none;

    /* Wooden/Parchment tablet style */
    background: linear-gradient(180deg, #efe2c4 0%, #d8c29a 100%);
    border: 2px solid var(--gold);
    border-radius: 6px;

    box-shadow:
        0 3px 6px rgba(0, 0, 0, 0.25),
        inset 0 1px 2px rgba(255, 255, 255, 0.4),
        inset 0 -1px 3px rgba(80, 50, 20, 0.15);

    transition: all 0.25s ease;
}

.select-wrapper select:hover {
    background: linear-gradient(180deg, #f7ebd3 0%, #e0cba4 100%);
    transform: translateY(-1px);
    box-shadow:
        0 5px 12px rgba(0, 0, 0, 0.3),
        inset 0 1px 3px rgba(255, 255, 255, 0.5),
        inset 0 -1px 3px rgba(80, 50, 20, 0.15);
}

.select-wrapper select:focus {
    box-shadow:
        0 0 0 2px rgba(202, 167, 106, 0.45),
        0 3px 8px rgba(0, 0, 0, 0.2),
        inset 0 1px 2px rgba(255, 255, 255, 0.4);
    border-color: var(--gold-bright);
}

/* Brass caret arrow */
.select-arrow {
    position: absolute;
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 7px solid var(--text-body);
    pointer-events: none;
    filter: drop-shadow(0 1px 1px rgba(255, 255, 255, 0.4));
}

/* =========================================
   RED LACQUER BUTTON – "Start Game"
   ========================================= */
.start-button {
    margin-top: 10px;
    padding: 14px 36px;
    width: 100%;
    font-family: 'Cinzel', serif;
    font-size: 16px;
    font-weight: 700;
    letter-spacing: 2.5px;
    text-transform: uppercase;
    color: var(--gold-bright);
    cursor: pointer;
    outline: none;
    border: 2px solid var(--red-bottom);
    border-radius: 12px;
    position: relative;
    overflow: hidden;

    /* Red lacquer gradient – bright top, dark bottom */
    background: linear-gradient(180deg, var(--red-top) 0%, var(--red-bottom) 100%);

    /* Bevel + depth */
    box-shadow:
        0 5px 14px rgba(0, 0, 0, 0.4),
        inset 0 2px 3px rgba(255, 255, 255, 0.25),
        inset 0 -2px 3px rgba(0, 0, 0, 0.2);

    /* Gold text glow */
    text-shadow:
        0 1px 3px rgba(0, 0, 0, 0.5),
        0 0 8px rgba(255, 215, 0, 0.25);

    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Shine sweep effect */
.start-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg,
            transparent, rgba(255, 255, 255, 0.25), transparent);
    transition: left 0.5s ease;
}

.start-button:hover {
    background: linear-gradient(180deg, #c42228 0%, #8d1318 100%);
    transform: translateY(-1px);
    box-shadow:
        0 8px 20px rgba(0, 0, 0, 0.45),
        0 0 16px rgba(255, 215, 0, 0.12),
        inset 0 2px 4px rgba(255, 255, 255, 0.3),
        inset 0 -2px 3px rgba(0, 0, 0, 0.2);
}

.start-button:hover::before {
    left: 100%;
}

.start-button:active {
    transform: translateY(2px);
    box-shadow:
        0 1px 4px rgba(0, 0, 0, 0.5),
        inset 0 2px 6px rgba(0, 0, 0, 0.4);
}

.start-button.loading,
.start-button:disabled {
    opacity: 0.8;
    pointer-events: none;
    filter: grayscale(0.4) brightness(0.9);
    background: linear-gradient(180deg, #7a2222 0%, #4a0f12 100%);
    box-shadow:
        inset 0 2px 4px rgba(0, 0, 0, 0.3);
    transform: translateY(1px);
    color: rgba(255, 215, 0, 0.7);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

/* Focus state – gold outline for accessibility */
.start-button:focus-visible {
    outline: 2px solid var(--gold);
    outline-offset: 3px;
}

.select-wrapper select:focus-visible {
    outline: 2px solid var(--gold);
    outline-offset: 2px;
}

/* =========================================
   SPARKLE EFFECTS
   ========================================= */
.sparkle {
    position: absolute;
    width: 3px;
    height: 3px;
    background: white;
    border-radius: 50%;
    box-shadow: 0 0 8px 2px rgba(202, 167, 106, 0.7);
    animation: sparkle 4s infinite ease-in-out;
    pointer-events: none;
    z-index: 5;
}

.sparkle-1 {
    top: 22%;
    right: 24%;
    animation-delay: 0s;
}

.sparkle-2 {
    bottom: 32%;
    left: 18%;
    animation-delay: 1.3s;
}

.sparkle-3 {
    top: 58%;
    right: 14%;
    animation-delay: 2.6s;
}

@keyframes sparkle {

    0%,
    100% {
        opacity: 0;
        transform: scale(0);
    }

    50% {
        opacity: 0.8;
        transform: scale(1);
    }
}

/* =========================================
   RESPONSIVE  (≤ 768px)
   ========================================= */
@media (max-width: 768px) {
    .plaque-container {
        width: 100%;
        max-width: 480px;
        padding: 0 16px;
    }

    .game-title {
        font-size: 30px;
        letter-spacing: 2px;
    }

    .plaque-content {
        padding: 32px 24px;
    }

    .plaque-frame {
        padding: 20px;
    }

    .game-header {
        padding: 0 24px;
        top: 18px;
    }
}

/* =========================================
   RESPONSIVE  (≤ 480px)
   ========================================= */
@media (max-width: 480px) {
    .plaque-container {
        width: 100%;
        padding: 0 12px;
    }

    .game-title {
        font-size: 26px;
        letter-spacing: 1.5px;
    }

    .subtitle {
        font-size: 14px;
        margin-bottom: 24px;
    }

    .plaque-content {
        padding: 24px 20px;
    }

    .plaque-frame {
        padding: 16px;
        border-radius: 14px;
    }

    form {
        gap: 16px;
    }

    .start-button {
        padding: 14px 24px;
        font-size: 15px;
    }

    .nav-links {
        gap: 18px;
    }

    .nav-links a {
        font-size: 13px;
    }

    .game-header {
        padding: 0 16px;
        top: 14px;
        position: relative;
        justify-content: space-between;
        margin-bottom: 20px;
    }

    .wood-background {
        flex-direction: column;
        justify-content: center;
        padding-top: 10px;
    }
}

/* =========================================
   EFFECT 1 – Entrance Animation (slide up + fade in)
   ========================================= */
.entrance-animate {
    animation: entranceSlideUp 1s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

@keyframes entranceSlideUp {
    0% {
        opacity: 0;
        transform: translateY(60px) scale(0.96);
    }

    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* Header also fades in with delay */
.game-header {
    animation: fadeInDown 0.8s 0.3s cubic-bezier(0.22, 1, 0.36, 1) both;
}

@keyframes fadeInDown {
    0% {
        opacity: 0;
        transform: translateY(-20px);
    }

    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

/* =========================================
   EFFECT 2 – Floating Golden Dust Particles
   ========================================= */
.dust {
    position: absolute;
    border-radius: 50%;
    pointer-events: none;
    z-index: 3;
    opacity: 0;
    /* Reduce overall dust opacity to make it less distracting */
    filter: opacity(0.4);
}

.dust-1 {
    width: 3px;
    height: 3px;
    background: rgba(202, 167, 106, 0.7);
    box-shadow: 0 0 6px 1px rgba(202, 167, 106, 0.4);
    top: 15%;
    left: 10%;
    animation: floatDust1 12s infinite ease-in-out;
}

.dust-2 {
    width: 2px;
    height: 2px;
    background: rgba(255, 215, 0, 0.6);
    box-shadow: 0 0 5px 1px rgba(255, 215, 0, 0.3);
    top: 70%;
    left: 85%;
    animation: floatDust2 15s 2s infinite ease-in-out;
}

.dust-3 {
    width: 4px;
    height: 4px;
    background: rgba(202, 167, 106, 0.5);
    box-shadow: 0 0 8px 2px rgba(202, 167, 106, 0.3);
    top: 40%;
    left: 5%;
    animation: floatDust3 18s 1s infinite ease-in-out;
}

.dust-4 {
    width: 2px;
    height: 2px;
    background: rgba(255, 215, 0, 0.5);
    box-shadow: 0 0 4px 1px rgba(255, 215, 0, 0.25);
    top: 80%;
    left: 25%;
    animation: floatDust4 14s 3s infinite ease-in-out;
}

.dust-5 {
    width: 3px;
    height: 3px;
    background: rgba(202, 167, 106, 0.6);
    box-shadow: 0 0 6px 1px rgba(202, 167, 106, 0.35);
    top: 25%;
    right: 12%;
    animation: floatDust5 16s 0.5s infinite ease-in-out;
}

.dust-6 {
    width: 2px;
    height: 2px;
    background: rgba(255, 215, 0, 0.45);
    box-shadow: 0 0 5px 1px rgba(255, 215, 0, 0.25);
    top: 60%;
    left: 70%;
    animation: floatDust6 13s 4s infinite ease-in-out;
}

.dust-7 {
    width: 3px;
    height: 3px;
    background: rgba(202, 167, 106, 0.55);
    box-shadow: 0 0 7px 2px rgba(202, 167, 106, 0.3);
    top: 50%;
    left: 20%;
    animation: floatDust7 17s 2.5s infinite ease-in-out;
}

.dust-8 {
    width: 2px;
    height: 2px;
    background: rgba(255, 215, 0, 0.5);
    box-shadow: 0 0 4px 1px rgba(255, 215, 0, 0.2);
    top: 30%;
    right: 35%;
    animation: floatDust8 11s 1.5s infinite ease-in-out;
}

/* Each particle has a unique float path */
@keyframes floatDust1 {

    0%,
    100% {
        opacity: 0;
        transform: translate(0, 0);
    }

    10% {
        opacity: 0.8;
    }

    50% {
        opacity: 0.4;
        transform: translate(80px, -120px);
    }

    90% {
        opacity: 0.7;
    }
}

@keyframes floatDust2 {

    0%,
    100% {
        opacity: 0;
        transform: translate(0, 0);
    }

    15% {
        opacity: 0.7;
    }

    50% {
        opacity: 0.3;
        transform: translate(-60px, -90px);
    }

    85% {
        opacity: 0.6;
    }
}

@keyframes floatDust3 {

    0%,
    100% {
        opacity: 0;
        transform: translate(0, 0);
    }

    12% {
        opacity: 0.6;
    }

    50% {
        opacity: 0.35;
        transform: translate(100px, -150px);
    }

    88% {
        opacity: 0.5;
    }
}

@keyframes floatDust4 {

    0%,
    100% {
        opacity: 0;
        transform: translate(0, 0);
    }

    10% {
        opacity: 0.65;
    }

    50% {
        opacity: 0.3;
        transform: translate(50px, -100px);
    }

    90% {
        opacity: 0.55;
    }
}

@keyframes floatDust5 {

    0%,
    100% {
        opacity: 0;
        transform: translate(0, 0);
    }

    14% {
        opacity: 0.7;
    }

    50% {
        opacity: 0.35;
        transform: translate(-70px, -130px);
    }

    86% {
        opacity: 0.6;
    }
}

@keyframes floatDust6 {

    0%,
    100% {
        opacity: 0;
        transform: translate(0, 0);
    }

    11% {
        opacity: 0.6;
    }

    50% {
        opacity: 0.25;
        transform: translate(-40px, -80px);
    }

    89% {
        opacity: 0.5;
    }
}

@keyframes floatDust7 {

    0%,
    100% {
        opacity: 0;
        transform: translate(0, 0);
    }

    13% {
        opacity: 0.55;
    }

    50% {
        opacity: 0.3;
        transform: translate(90px, -110px);
    }

    87% {
        opacity: 0.45;
    }
}

@keyframes floatDust8 {

    0%,
    100% {
        opacity: 0;
        transform: translate(0, 0);
    }

    10% {
        opacity: 0.7;
    }

    50% {
        opacity: 0.35;
        transform: translate(-55px, -95px);
    }

    90% {
        opacity: 0.6;
    }
}

/* =========================================
   EFFECT 3 – Frame Shimmer (light sweep along border)
   ========================================= */
.plaque-frame::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    border-radius: 20px;
    z-index: -1;
    pointer-events: none;

    /* Rotating conic gradient creates a shimmer that travels around the border */
    background: conic-gradient(from var(--shimmer-angle, 0deg),
            transparent 0%,
            transparent 30%,
            rgba(202, 167, 106, 0.5) 40%,
            rgba(255, 215, 0, 0.35) 50%,
            rgba(202, 167, 106, 0.5) 60%,
            transparent 70%,
            transparent 100%);
    animation: frameShimmer 6s linear infinite;
}

/* Mask the center so only the border edge glows */
.plaque-frame::after {
    content: '';
    position: absolute;
    top: 3px;
    left: 3px;
    right: 3px;
    bottom: 3px;
    border-radius: 16px;
    z-index: -1;
    pointer-events: none;
    background: linear-gradient(160deg,
            var(--frame-light) 0%,
            var(--frame-mid) 30%,
            var(--frame-dark) 65%,
            var(--frame-mid) 85%,
            var(--frame-light) 100%);
}

@property --shimmer-angle {
    syntax: '<angle>';
    initial-value: 0deg;
    inherits: false;
}

@keyframes frameShimmer {
    0% {
        --shimmer-angle: 0deg;
    }

    100% {
        --shimmer-angle: 360deg;
    }
}

/* Fallback for browsers that don't support @property – subtle pulsing glow instead */
@supports not (background: conic-gradient(from 0deg, red, blue)) {
    .plaque-frame::before {
        background: none;
        box-shadow: 0 0 15px 2px rgba(202, 167, 106, 0.15);
        animation: shimmerFallback 3s ease-in-out infinite alternate;
    }
}

@keyframes shimmerFallback {
    0% {
        box-shadow: 0 0 10px 2px rgba(202, 167, 106, 0.1);
    }

    100% {
        box-shadow: 0 0 20px 4px rgba(202, 167, 106, 0.3);
    }
}

/* =========================================
   EFFECT 4 – Logo Pulse Glow
   ========================================= */
.logo-icon {
    animation: logoPulse 3s ease-in-out infinite;
    filter: drop-shadow(0 0 6px rgba(202, 167, 106, 0.3));
}

@keyframes logoPulse {

    0%,
    100% {
        filter: drop-shadow(0 0 4px rgba(202, 167, 106, 0.2)) drop-shadow(0 2px 6px rgba(0, 0, 0, 0.6));
        transform: scale(1);
    }

    50% {
        filter: drop-shadow(0 0 12px rgba(255, 215, 0, 0.45)) drop-shadow(0 2px 6px rgba(0, 0, 0, 0.6));
        transform: scale(1.05);
    }
}

/* =========================================
   EFFECT 5 – Nav Link Animated Underline
   ========================================= */
.nav-links a {
    position: relative;
}

.nav-links a::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -4px;
    width: 0;
    height: 3px;
    background: var(--gold-bright);
    border-radius: 4px 10px 4px 10px;
    transition: width 0.35s cubic-bezier(0.25, 0.8, 0.25, 1);
    box-shadow: 0 0 6px rgba(202, 167, 106, 0.4);
}

.nav-links a:hover::after,
.nav-links a.active::after {
    width: 100%;
}

/* =========================================
   "SỔ LUẬT" (RULES BOOK) 2-PAGE SPREAD
   ========================================= */
.rules-overlay {
    position: fixed;
    inset: 0;
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    background: radial-gradient(circle at center, rgba(20, 10, 5, 0.35) 0%, rgba(20, 10, 5, 0.55) 100%);
    -webkit-backdrop-filter: blur(8px);
    backdrop-filter: blur(8px);
    opacity: 1;
    transition: opacity 0.3s ease;
    padding: 20px;
}

@supports not (backdrop-filter: blur(8px)) {
    .rules-overlay {
        background: radial-gradient(circle at center, rgba(20, 10, 5, 0.75) 0%, rgba(20, 10, 5, 0.90) 100%);
    }
}

.rules-overlay[hidden] {
    display: none;
    opacity: 0;
}

.book-close {
    position: absolute;
    top: 30px;
    right: 40px;
    background: transparent;
    border: none;
    color: var(--gold);
    font-size: 32px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
    opacity: 0.8;
    z-index: 1010;
}

.book-close:hover {
    color: var(--gold-bright);
    transform: scale(1.1) rotate(90deg);
    opacity: 1;
}

.book-spread {
    position: relative;
    width: 100%;
    max-width: 900px;
    height: 80vh;
    max-height: 800px;
    min-height: 500px;
    background-color: #f1ebd9;
    /* cleaner parchment */
    /* Paper grain (very faint SVG or radial noise approximation) */
    background-image:
        radial-gradient(ellipse at center, rgba(160, 107, 61, 0.02) 0%, rgba(106, 63, 31, 0.05) 100%);
    border-radius: 6px;
    box-shadow:
        15px 15px 40px rgba(0, 0, 0, 0.7),
        inset 0 0 40px rgba(106, 63, 31, 0.1);
    border: 1px solid rgba(106, 63, 31, 0.4);
    display: flex;
    flex-direction: row;
    overflow: hidden;
}

/* Spine visual in the middle */
.book-spine-center {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 35%;
    width: 40px;
    transform: translateX(-50%);
    background: linear-gradient(90deg,
            transparent 0%,
            rgba(0, 0, 0, 0.1) 45%,
            rgba(0, 0, 0, 0.2) 50%,
            rgba(255, 255, 255, 0.1) 55%,
            transparent 100%);
    z-index: 5;
    pointer-events: none;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
}

/* ================= TRANG TRÁI (TOC) ================= */
.book-page-left {
    flex: 0 0 35%;
    border-right: 1px solid rgba(106, 63, 31, 0.1);
    padding: 30px 20px 30px 30px;
    display: flex;
    flex-direction: column;
    position: relative;
    z-index: 2;
    background: linear-gradient(90deg, rgba(255, 255, 255, 0.2) 0%, transparent 90%, rgba(0, 0, 0, 0.05) 100%);
}

.book-header-left {
    text-align: center;
    margin-bottom: 20px;
}

.book-hanzi-left {
    font-family: 'Ma Shan Zheng', cursive;
    font-size: 38px;
    color: var(--text-title);
    margin: 0;
    line-height: 1.1;
    text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.3);
}

.book-sub-header {
    font-family: 'Noto Serif', serif;
    font-size: 16px;
    color: var(--text-muted);
    font-style: italic;
    display: block;
    margin-top: 5px;
}

.ink-divider {
    height: 3px;
    background: radial-gradient(circle, rgba(106, 63, 31, 0.6) 0%, transparent 80%);
    margin: 15px auto;
    width: 80%;
}

.book-toc {
    list-style: none;
    padding: 0;
    margin: 0;
    flex-grow: 1;
    overflow-y: auto;
}

/* Scrollbar for TOC */
.book-toc::-webkit-scrollbar {
    width: 4px;
}

.book-toc::-webkit-scrollbar-track {
    background: transparent;
}

.book-toc::-webkit-scrollbar-thumb {
    background: rgba(160, 107, 61, 0.3);
    border-radius: 4px;
}

.book-toc li {
    font-family: 'Noto Serif', serif;
    font-size: 15px;
    color: var(--text-body);
    padding: 12px 10px;
    margin-bottom: 5px;
    cursor: pointer;
    border-radius: 4px;
    border-left: 3px solid transparent;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    position: relative;
}

.book-toc li:hover {
    background: rgba(160, 107, 61, 0.08);
}

.book-toc li.active {
    background: rgba(202, 167, 106, 0.15);
    /* light gold */
    border-left: 3px solid var(--gold);
    color: var(--text-title);
    font-weight: 600;
}

.toc-num {
    font-family: 'Cinzel', serif;
    font-size: 14px;
    color: var(--gold-dark);
    width: 25px;
    display: inline-block;
}

.toc-seal {
    position: absolute;
    right: 10px;
    font-family: 'Ma Shan Zheng', cursive;
    color: #b11a1f;
    border: 1px solid #b11a1f;
    border-radius: 2px;
    font-size: 14px;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transform: rotate(-10deg) scale(0.5);
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.book-toc li.active .toc-seal {
    opacity: 0.8;
    transform: rotate(-5deg) scale(1);
}

.book-tips {
    margin-top: 20px;
    border-top: 1px dashed rgba(106, 63, 31, 0.2);
    padding-top: 15px;
}

.book-tips p {
    font-family: 'Noto Serif', serif;
    font-size: 13px;
    color: var(--text-muted);
    margin-bottom: 5px;
    font-style: italic;
}

.book-tips kbd {
    background: rgba(106, 63, 31, 0.1);
    border: 1px solid rgba(106, 63, 31, 0.3);
    border-radius: 3px;
    padding: 1px 4px;
    font-family: sans-serif;
    font-size: 11px;
}

/* ================= TRANG PHẢI (CONTENT) ================= */
.book-page-right-wrapper {
    flex: 1;
    position: relative;
    padding: 40px 40px 40px 40px;
    perspective: 1500px;
    z-index: 10;
}

.book-content {
    position: relative;
    width: 100%;
    height: calc(100% - 30px);
    /* Leave room for indicator */
}

.book-page {
    position: absolute;
    inset: 0;
    overflow-y: auto;
    padding-right: 15px;
    opacity: 0;
    transform-origin: left center;
    transform: rotateY(15deg);
    transition: opacity 0.26s ease, transform 0.26s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
    /* subtle inner shadow to simulate page bend */
    background: linear-gradient(90deg, rgba(0, 0, 0, 0.03) 0%, transparent 20%, transparent 95%, rgba(0, 0, 0, 0.02) 100%);
}

.book-page.active {
    opacity: 1;
    transform: rotateY(0deg);
    pointer-events: auto;
}

.flipping .book-page.active {
    opacity: 0;
    transform: rotateY(-30deg);
    /* Flip away */
    filter: drop-shadow(5px 0 10px rgba(0, 0, 0, 0.1));
}

.book-page::-webkit-scrollbar {
    width: 5px;
}

.book-page::-webkit-scrollbar-track {
    background: transparent;
}

.book-page::-webkit-scrollbar-thumb {
    background: rgba(160, 107, 61, 0.4);
    border-radius: 4px;
}

.book-chapter-title {
    font-family: 'Noto Serif', serif;
    font-size: 26px;
    color: var(--text-title);
    margin: 0 0 10px 0;
    font-weight: 700;
}

.book-summary {
    font-family: 'Noto Serif', serif;
    font-size: 16px;
    color: var(--text-muted);
    font-style: italic;
    margin-bottom: 20px;
    line-height: 1.5;
}

/* Rule Cards */
.rule-cards {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 20px;
}

.rule-cards-pieces {
    flex-direction: row;
    flex-wrap: wrap;
}

.rule-card {
    background: rgba(255, 255, 255, 0.4);
    border: 1px solid rgba(160, 107, 61, 0.3);
    border-radius: 4px;
    padding: 12px 16px;
    font-family: 'Noto Serif', serif;
    font-size: 15px;
    color: var(--text-body);
    line-height: 1.5;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.02);
}

.rule-card strong {
    color: var(--text-title);
}

.rc-piece {
    flex: 1 1 calc(50% - 12px);
    text-align: center;
    padding: 10px;
}

/* Mini Table */
.mini-table {
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(160, 107, 61, 0.2);
    border-radius: 4px;
    overflow: hidden;
}

.mt-row {
    display: grid;
    grid-template-columns: 120px 1fr;
    border-bottom: 1px solid rgba(160, 107, 61, 0.1);
}

.mt-row:last-child {
    border-bottom: none;
}

.mt-header {
    background: rgba(160, 107, 61, 0.1);
}

.mt-key {
    padding: 10px 15px;
    font-family: 'Noto Serif', serif;
    font-size: 14px;
    color: var(--text-title);
    border-right: 1px solid rgba(160, 107, 61, 0.1);
    font-weight: 600;
}

.mt-val {
    padding: 10px 15px;
    font-family: 'Noto Serif', serif;
    font-size: 14px;
    color: var(--text-body);
}

/* Callouts */
.book-callout {
    margin-top: 20px;
    padding: 12px 16px;
    background: linear-gradient(90deg, rgba(202, 167, 106, 0.15) 0%, rgba(202, 167, 106, 0.05) 100%);
    border-left: 4px solid var(--gold);
    border-radius: 0 4px 4px 0;
    font-family: 'Noto Serif', serif;
    font-size: 15px;
    line-height: 1.6;
    color: var(--text-body);
    box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.05);
}

.book-callout.style-info strong {
    color: var(--gold-dark);
}

.book-callout.style-warning {
    background: linear-gradient(90deg, rgba(177, 26, 31, 0.1) 0%, rgba(177, 26, 31, 0.02) 100%);
    border-left-color: #b11a1f;
}

.book-right-seal {
    position: absolute;
    bottom: 30px;
    right: 40px;
    width: 32px;
    height: 32px;
    border: 2px solid #b11a1f;
    color: #b11a1f;
    font-family: 'Ma Shan Zheng', cursive;
    font-size: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 3px;
    transform: rotate(5deg);
    opacity: 0.5;
    pointer-events: none;
}

.book-page-number {
    position: absolute;
    bottom: 30px;
    left: 40px;
    font-family: 'Noto Serif', serif;
    font-size: 14px;
    color: var(--text-muted);
    font-style: italic;
    letter-spacing: 1px;
}

/* Corner Flips (Edges) */
.corner-flip {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 60px;
    height: 80%;
    background: transparent;
    border: none;
    cursor: pointer;
    z-index: 20;
    opacity: 0;
    transition: opacity 0.2s, background 0.2s;
    display: flex;
    align-items: center;
}

.corner-prev {
    left: 0;
    justify-content: flex-start;
}

.corner-next {
    right: 0;
    justify-content: flex-end;
}

.corner-flip:hover:not(:disabled) {
    opacity: 1;
}

.corner-flip:disabled {
    cursor: default;
    display: none;
}

.corner-prev::before {
    content: '‹';
    font-family: sans-serif;
    font-size: 60px;
    color: var(--gold);
    margin-left: -15px;
    text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    pointer-events: none;
}

.corner-next::before {
    content: '›';
    font-family: sans-serif;
    font-size: 60px;
    color: var(--gold);
    margin-right: -15px;
    text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    pointer-events: none;
}

/* =========================================
   RESPONSIVE MODAL
   ========================================= */
@media (max-width: 768px) {
    .rules-overlay {
        padding: 5px;
    }

    .book-spread {
        flex-direction: column;
        height: 95vh;
        max-height: 95vh;
        border-radius: 4px;
    }

    .book-spine-center {
        display: none;
    }

    .book-page-left {
        flex: 0 0 auto;
        border-right: none;
        border-bottom: 1px solid rgba(106, 63, 31, 0.2);
        padding: 15px 15px 10px 15px;
        background: rgba(255, 255, 255, 0.2);
    }

    .book-header-left {
        margin-bottom: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }

    .book-hanzi-left {
        font-size: 28px;
    }

    .book-sub-header {
        margin-top: 0;
    }

    .ink-divider {
        display: none;
    }

    .book-toc {
        display: flex;
        flex-direction: row;
        overflow-x: auto;
        overflow-y: hidden;
        white-space: nowrap;
        padding-bottom: 5px;
    }

    .book-toc li {
        display: inline-flex;
        border-left: none;
        border-bottom: 3px solid transparent;
        margin-right: 10px;
        padding: 8px 10px;
        font-size: 14px;
    }

    .book-toc li.active {
        border-left: none;
        border-bottom: 3px solid var(--gold);
    }

    .toc-seal {
        display: none;
    }

    .book-tips {
        display: none;
    }

    .book-page-right-wrapper {
        padding: 20px 15px 15px 15px;
    }

    .book-content {
        height: calc(100% - 25px);
    }

    .book-chapter-title {
        font-size: 20px;
    }

    .book-summary {
        font-size: 14px;
        margin-bottom: 15px;
    }

    .rule-card {
        font-size: 14px;
        padding: 10px;
    }

    .rc-piece {
        flex: 1 1 100%;
    }

    .mt-row {
        grid-template-columns: 80px 1fr;
    }

    .mt-key,
    .mt-val {
        font-size: 13px;
        padding: 8px 10px;
    }

    .book-callout {
        font-size: 14px;
        padding: 10px;
    }

    .corner-flip {
        width: 30px;
        opacity: 0.6;
        /* visible on mobile */
    }

    .corner-prev::before {
        margin-left: 0;
        font-size: 40px;
    }

    .corner-next::before {
        margin-right: 0;
        font-size: 40px;
    }

    .book-close {
        top: 10px;
        right: 10px;
        font-size: 26px;
        z-index: 2000;
    }

    .book-page-number {
        bottom: 10px;
        left: 15px;
        font-size: 12px;
    }

    .book-right-seal {
        bottom: 10px;
        right: 15px;
        width: 24px;
        height: 24px;
        font-size: 14px;
    }
}