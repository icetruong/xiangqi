{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xiangqi Game</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Sans+SC:wght@400;700&display=swap"
        rel="stylesheet">

    <!-- CSS Modules -->
    <link rel="stylesheet" href="{% static 'games/css/base.css' %}">
    <link rel="stylesheet" href="{% static 'games/css/board.css' %}">
    <link rel="stylesheet" href="{% static 'games/css/pieces.css' %}">
    <link rel="stylesheet" href="{% static 'games/css/effects.css' %}">
</head>

<body>
    <div class="main-container">
        <div class="game-area">
            <div class="board-shell">
                <div class="board-surface">
                    <div class="board-inner" id="board"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- JS Modules -->
    <script src="{% static 'games/js/constants.js' %}"></script>
    <script src="{% static 'games/js/svg-grid.js' %}"></script>
    <script src="{% static 'games/js/piece-renderer.js' %}"></script>
    <script src="{% static 'games/js/game-logic.js' %}"></script>
    <script src="{% static 'games/js/game.js' %}"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var movesData = {{ legal_moves|default:"[]"|safe }};
            initGame({
                gameId: "{{ game.id }}",
                boardState: {{ game.board_state|safe }},
                currentTurn: "{{ game.current_turn }}",
                status: "{{ game.status }}",
                playerSide: "{{ game.player_side }}",
                aiSide: "{{ game.ai_side }}",
                legalMoves: movesData
            });
        });
    </script>
</body>

</html>
