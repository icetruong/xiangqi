{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xiangqi Game</title>
    <link rel="stylesheet" href="{% static 'games/css/style.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&display=swap" rel="stylesheet">
</head>

<body>
    <div class="main-container">
        <!-- Left: Game Board -->
        <div class="game-area">
            <div class="board-wrapper">
                <div id="board" class="xiangqi-board">
                    <!-- Board Decorations (Palace Lines) -->
                    <div class="board-decorations"></div>
                    <!-- Board rendered by JS -->
                </div>
            </div>
        </div>

        <!-- Right: Sidebar -->
        <div class="sidebar">
            <!-- Opponent Profile -->
            <div class="profile-card opponent">
                <div class="avatar">
                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" alt="AI">
                </div>
                <div class="info">
                    <div class="name">Computer (AI)</div>
                    <div class="rank">T·∫≠p S·ª± <span class="icon">üê•</span></div>
                    <div class="assets">üí∞ 54K</div>
                </div>
            </div>

            <!-- Scoreboard / Status -->
            <div class="scoreboard">
                <div class="title">B·∫£ng t·ª∑ s·ªë</div>
                <div class="scores">
                    <span class="side-r">Â∏• 0</span>
                    <span class="vs">VS</span>
                    <span class="side-b">Â∞á 0</span>
                </div>
                <div id="status-display" class="status-msg">
                    {{ game.status }}
                </div>
            </div>

            <!-- Player Profile -->
            <div class="profile-card player">
                <div class="avatar">
                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Aneka" alt="Player">
                </div>
                <div class="info">
                    <div class="name">Player (You)</div>
                    <div class="rank">Nh·∫≠p M√¥n <span class="icon">ü•ö</span></div>
                    <div class="assets">üí∞ 7K</div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls">
                <button class="btn-game" onclick="alert('Requesting Draw...')">C·∫ßu H√≤a</button>
                <button class="btn-game" onclick="alert('Resigning...')">Xin Thua</button>
                <button class="btn-game" onclick="alert('Undoing...')">Xin ƒêi L·∫°i</button>
                <button class="btn-game" onclick="window.location.href='/'">Tho√°t</button>
            </div>

            <!-- Chat/Log Placeholder -->
            <div class="chat-log">
                <div class="log-entry system">System: Game Started</div>
                <div id="game-status-log" class="log-entry">Turn: <span id="turn">{{ game.current_turn }}</span></div>
            </div>
        </div>
    </div>

    <script src="{% static 'games/js/game.js' %}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            initGame({
                gameId: "{{ game.id }}",
                boardState: {{ game.board_state | safe }},
            currentTurn: "{{ game.current_turn }}",
            status: "{{ game.status }}",
            playerSide: "{{ game.player_side }}",
            aiSide: "{{ game.ai_side }}"
            });
        });
    </script>
</body>

</html>